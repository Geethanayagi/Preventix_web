<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sepsis Prediction</title>
  <style>
    body { font-family: Arial; margin: 2em; }
    textarea { width: 100%; height: 150px; }
    button { margin-top: 10px; padding: 10px 20px; font-size: 16px; }
    #output { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Enter Normalized Input (each line = 1 time step with 14 comma-separated values)</h2>
  <textarea id="inputData" placeholder="e.g.\n0.1,0.2,... (14 values)"></textarea>
  <button onclick="makePrediction()">Predict</button>
  <div id="output"></div>

  <script>
    async function makePrediction() {
      const rawText = document.getElementById("inputData").value;
      const lines = rawText.trim().split("\n");
      const sequence = lines.map(line => line.trim().split(",").map(Number));

      const response = await fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ sequence })
      });

      const result = await response.json();
      if (response.ok) {
        document.getElementById("output").innerHTML = `
          Prediction: <span style="color: ${result.prediction === 'Sepsis' ? 'red' : 'green'}">${result.prediction}</span><br/>
          Class Probabilities: ${JSON.stringify(result.probabilities)}
        `;
      } else {
        document.getElementById("output").textContent = "Error: " + result.error;
      }
    }
  </script>
</body>
</html>
